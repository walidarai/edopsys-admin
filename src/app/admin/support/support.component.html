<app-breadcrumb></app-breadcrumb>

<app-sub-tabs [tabs]="tabs"></app-sub-tabs>

<div class="grid gap-4">
    <div
        *ngFor="let ticket of tickets"
        class="rounded-md border border-gray-200 p-4 shadow bg-white"
    >
        <div
            class="flex flex-col md:flex-row justify-between items-start md:items-center gap-2 mb-2"
        >
            <div>
                <h2 class="text-lg font-bold text-gray-800">
                    {{ ticket.subject }}
                </h2>
                <p class="text-sm text-gray-500">ID: {{ ticket.id }}</p>
            </div>
            <div class="flex items-center gap-2">
                <span
                    class="text-xs font-medium px-2 py-1 rounded-full"
                    [ngClass]="{
                        'bg-red-100 text-red-600': ticket.priority === 'High',
                        'bg-yellow-100 text-yellow-600':
                            ticket.priority === 'Medium',
                        'bg-green-100 text-green-600': ticket.priority === 'Low'
                    }"
                >
                    {{ ticket.priority }}
                </span>
                <span class="text-xs text-gray-400"
                    >Created: {{ ticket.createdAt | date : "short" }}</span
                >
            </div>
        </div>

        <p class="text-sm text-gray-700 mb-4">{{ ticket.description }}</p>

        <div class="flex justify-between items-center">
            <div class="text-sm text-gray-600">
                <span class="font-medium">User:</span> {{ ticket.user }}
            </div>

            <div class="flex items-center gap-2">
                <label for="status" class="text-sm font-medium text-gray-600"
                    >Status:</label
                >
                <select
                    class="border border-gray-300 rounded-md px-2 py-1 text-sm"
                    [value]="ticket.status"
                >
                    <!-- (change)="updateStatus(ticket, ticket)" -->
                    <option
                        *ngFor="let status of statusOptions"
                        [value]="status"
                    >
                        {{ status }}
                    </option>
                </select>
            </div>
        </div>
    </div>
</div>
